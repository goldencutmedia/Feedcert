import{g as T}from"./chunk-U2RXQGBG.js";import{A as x,Bc as L,D as v,N as E,a as b,f as d,fd as C,rb as N}from"./chunk-SVYUJ4SK.js";var D=class{id="";name="";person="";countrycode="";street="";postalcode="";city="";phone="";fax="";email="";web="";traderegisternumber="";registercourt="";number="";tempNumber=0;bioControlFacility="";firstAudit=new Date;certification=new Date;nextAudit=new Date;control=new Date;constructor(e={}){Object.assign(this,e)}};var f=class{username="";firstname="";lastname="";email="";id="";company;roles;constructor(e={}){Object.assign(this,e)}};var U=60,Y=U*60,F=Y*24,z=F*7,g=1e3,J=U*g,V=Y*g,ot=F*g,lt=z*g,$="Invalid Date",B="YYYY-MM-DDTHH:mm:ssZ",P=/^(\d{4})[/-]?(\d{1,2})?[/-]?(\d{0,2})[\sTt]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,G=t=>t,h=(t,e)=>e.reduce((s,r)=>(Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r]),s),{}),A=t=>new Date(t),K=t=>{let e=-t,s=Math.abs(e),r=Math.floor(s/60),i=s%60;return`${e<=0?"+":"-"}${`${r}`.padStart(2,"0")}:${`${i}`.padStart(2,"0")}`},W=t=>typeof t=="object"&&t!==null&&Object.keys(t).length===0,k=G({y:"year",M:"month",D:"date",h:"hour",m:"minute",s:"second",ms:"millisecond",d:"day",w:"week"}),X=Object.keys(k),ct=Object.values(k),q=t=>X.includes(t),j=t=>{var e,s;return q(t)?k[t]:(s=(e=t?.toLowerCase())==null?void 0:e.replace(/s$/,""))!=null?s:""},Q={name:"en",weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},tt=Q,O="en",S={};S[O]=tt;var et=t=>{if(t instanceof Date)return A(t);if(t===null)return new Date(Number.NaN);if(t===void 0)return new Date;if(W(t))return new Date;if(Array.isArray(t))return new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);if(typeof t=="string"&&!/z$/i.test(t)){let e=t.match(P);if(e){let s=+e[2]-1||0,r=+(e[7]||"0").slice(0,3);return new Date(+e[1],s,+(e[3]||1),+(e[4]||0),+(e[5]||0),+(e[6]||0),r)}}return new Date(t)},w=(t,e,s)=>{let r;if(!t)return O;if(typeof t=="string"){let i=t.toLowerCase();S[i]&&(r=i),s&&(S[i]=s,r=i);let n=t.split("-");if(!r&&n.length>1)return w(n[0])}else{let{name:i}=t;S[i]=t,r=i}return!e&&r&&(O=r),r||(e?"":O)},u=class extends class{}{constructor(t,e){super(),this._d=new Date,this._options=e||{},this._locale=w(this._options.locale,!0),this.parse(t),this._init()}parse(t){this._d=et(t)}_init(){this._year=this._d.getFullYear(),this._month=this._d.getMonth(),this._date=this._d.getDate(),this._hour=this._d.getHours(),this._minute=this._d.getMinutes(),this._second=this._d.getSeconds(),this._millisecond=this._d.getMilliseconds(),this._day=this._d.getDay()}valueOf(){return this._d.getTime()}unix(){return Math.floor(this.valueOf()/1e3)}isValid(){return this._d.toString()!==$}_startEndOf(t,e){let s=({year:n=this._year,month:o=this._month,date:m=this._date,hour:p=this._hour,minute:M=this._minute,second:l=this._second,millisecond:c=this._millisecond})=>new u([n,o,m,p,M,l,c],this._options),r=e?{month:0,date:1,hour:0,minute:0,second:0,millisecond:0}:{month:11,date:31,hour:23,minute:59,second:59,millisecond:999};switch(j(t)){case"year":return s(r);case"month":return s(e?h(r,["date","hour","minute","second","millisecond"]):b({month:this._month+1,date:0},h(r,["hour","minute","second","millisecond"])));case"date":case"day":return s(h(r,["hour","minute","second","millisecond"]));case"hour":return s(h(r,["minute","second","millisecond"]));case"minute":return s(h(r,["second","millisecond"]));case"second":return s(h(r,["millisecond"]));case"week":{let n=this.$locale().weekStart||0,o=(this._day<n?this._day+7:this._day)-n;return s(b({date:e?this._date-o:this._date+(6-o)},h(r,["hour","minute","second","millisecond"])))}case"millisecond":return this.clone()}}$locale(){return S[this._locale]}locale(t,e){if(!t)return this._locale;let s=this.clone(),r=w(t,!0,e);return r&&(s._locale=r),s}startOf(t){return this._startEndOf(t,!0)}endOf(t){return this._startEndOf(t,!1)}isSame(t,e="millisecond"){let s=a(t);return this.startOf(e)<=s&&s<=this.endOf(e)}isAfter(t,e="millisecond"){return a(t)<this.startOf(e)}isBefore(t,e="millisecond"){return this.endOf(e)<a(t)}clone(){return new u(this._d,this._options)}get(t){return this[`_${t}`]}set(t,e){let r={year:"setFullYear",month:"setMonth",date:"setDate",hour:"setHours",minute:"setMinutes",second:"setSeconds",millisecond:"setMilliseconds",day:"setDate"}[t];if(!r)return this;let i=A(this._d),n=t==="day"?this._date+(e-this._day):e;return t==="month"||t==="year"?(i.setDate(1),i[r](n),i.setDate(Math.min(this._date,a(i).daysInMonth()))):r&&i[r](n),a(i)}daysInMonth(){return this.endOf("month").date()}toDate(){return A(this._d)}toJSON(){return this.isValid()?this.toISOString():null}toISOString(){return this._d.toISOString()}toString(){return this._d.toUTCString()}utcOffset(){return-Math.round(this._d.getTimezoneOffset()/15)*15}format(t){let e=this.$locale();if(!this.isValid())return e.invalidDate||$;let s=t||B,r=K(this.utcOffset()),{weekdays:i,months:n}=e,o=(l,c,y,_)=>l?.[c]||y?.[c].slice(0,Math.max(0,_??0)),m=l=>`${this._hour%12||12}`.padStart(l,"0"),p=e.meridiem||((l,c,y)=>{let _=l<12?"AM":"PM";return y?_.toLowerCase():_}),M={YY:String(this._year).slice(-2),YYYY:this._year,M:this._month+1,MM:`${this._month+1}`.padStart(2,"0"),MMM:o(e.monthsShort,this._month,n,3),MMMM:o(n,this._month),D:this._date,DD:`${this._date}`.padStart(2,"0"),d:String(this._day),dd:o(e.weekdaysMin,this._day,i,2),ddd:o(e.weekdaysShort,this._day,i,3),dddd:i[this._day],H:String(this._hour),HH:`${this._hour}`.padStart(2,"0"),h:m(1),hh:m(2),a:p(this._hour,this._minute,!0),A:p(this._hour,this._minute,!1),m:String(this._minute),mm:`${this._minute}`.padStart(2,"0"),s:String(this._second),ss:`${this._second}`.padStart(2,"0"),SSS:`${this._millisecond}`.padStart(3,"0"),Z:r};return s.replace(Z,(l,c)=>c||M[l]||r.replace(":",""))}add(t,e){let s=j(e),r=m=>this.date(this.date()+Math.round(m*t));if(s==="month")return this.set("month",this._month+t);if(s==="year")return this.set("year",this._year+t);if(s==="day")return r(1);if(s==="week")return r(7);let n={minute:J,hour:V,second:g,millisecond:1}[s],o=this.valueOf()+t*n;return new u(o,this._options)}subtract(t,e){return this.add(t*-1,e)}},st=t=>{function e(s){return s===void 0?this.get(t):this.set(t,s)}return e};["year","month","date","hour","minute","second","millisecond","day"].forEach(t=>u.prototype[t]=st(t));var H=t=>t instanceof u,rt=t=>a(t*1e3),it=(t,e)=>(t._i||(t(u,a,e),t._i=!0),a),a=(t,e,s,r)=>{if(H(t))return t;typeof s=="boolean"&&(r=s,s=void 0);let i={format:e,locale:s,strict:r};return new u(t,i)};a.isDayjs=H;a.unix=rt;a.extend=it;a.locale=w;var I=a;var R=class t{api;router;snackbar;constructor(e,s,r){this.api=e,this.router=s,this.snackbar=r,this.receivedFilter=new E,this.token=localStorage.getItem("id_token")||"",t.user.next(new f);let i=localStorage.getItem("user");i&&this.setUser(i)}get isLoggedIn(){return t.isLoggedInCookie()&&this.loggedIn.next(!0),this.loggedIn.asObservable()}get isAdministrator(){return this.administrator.asObservable()}get isTaskforce(){return this.taskforce.asObservable()}get isStandard(){return this.standard.asObservable()}static user=new d(new f);receivedFilter;username="";password="";token;loggedIn=new d(!1);administrator=new d(!1);taskforce=new d(!1);standard=new d(!1);company=new d(new D);static getCompanyID(){return this.user.getValue().company.id}static getUser(){return t.user.asObservable()}static getUsername(){return t.user.getValue().username}static getExpiration(){let e=localStorage.getItem("expires_at"),s=e?JSON.parse(e):null;return I(s).toDate()}static isLoggedInCookie(){return!!I().isBefore(t.getExpiration())}login(e,s){return(!e||!s)&&this.snackbar.openSnackBar("Anmeldedaten nicht vollst\xE4ndig ausgef\xFCllt"),this.api.sendPostRequest("users/login",{id:e,password:s}).subscribe(r=>{this.setSession(r),this.loggedIn.next(!0),this.router.navigate(["/home"])},r=>{r&&this.snackbar.openSnackBar(r)})}logout(){localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),localStorage.removeItem("user"),this.loggedIn.next(!1),window.location.href=N.loginApp||"/login"}setSession(e){this.setUser(e.user),this.token=e.token;let s=I().add(Number(e.expiresIn.replace("h","")),"hour");localStorage.setItem("user",JSON.stringify(t.user.getValue())),localStorage.setItem("id_token",this.token),localStorage.setItem("expires_at",JSON.stringify(s.valueOf()))}setUser(e){if(!e)return;e=JSON.parse(e),t.user.next(new f(e));let s=e.roles;s.includes("ADMIN")?this.administrator.next(!0):this.administrator.next(!1),s.includes("TASKFORCE")?this.taskforce.next(!0):this.taskforce.next(!1),s.includes("STANDARD")?this.standard.next(!0):this.standard.next(!1)}getToken(){return this.token}static \u0275fac=function(s){return new(s||t)(v(C),v(L),v(T))};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})};export{D as a,R as b};
